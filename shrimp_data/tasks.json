{
  "tasks": [
    {
      "id": "e5d5a4a4-79ad-42f9-b0fd-46364f4a4eeb",
      "name": "Task 017-1: useInvoiceStore에 공유 상태 및 액션 추가",
      "description": "Zustand store에 공유 링크 생성, 검증, 조회 기능을 추가합니다. API 호출 로직을 store에 통합하고, 공유 상태(isSharing, sharedInvoices, shareLink)를 관리합니다.",
      "notes": "동적 임포트로 순환 의존성 방지. 기존 updateInvoice 패턴 참고. useLocalStorage에서 토큰 관리 확인 필수.",
      "status": "completed",
      "dependencies": [],
      "createdAt": "2026-01-20T09:37:23.656Z",
      "updatedAt": "2026-01-20T09:39:35.808Z",
      "relatedFiles": [
        {
          "path": "store/useInvoiceStore.ts",
          "type": "TO_MODIFY",
          "description": "공유 상태 및 액션 추가",
          "lineStart": 1,
          "lineEnd": 154
        },
        {
          "path": "lib/api-share.ts",
          "type": "REFERENCE",
          "description": "공유 API 함수 참고"
        }
      ],
      "implementationGuide": "1. store/useInvoiceStore.ts 수정: 공유 관련 상태 추가 (shareLinks: InvoiceShare[], isSharing: boolean)\\n2. 액션 추가: createShareLink(invoiceId), deleteShareLink(shareId), getMyShareLinks()\\n3. 각 액션은 lib/api-share.ts의 함수를 동적 임포트로 호출\\n4. 에러 처리 및 로딩 상태 관리 (기존 패턴 따르기)\\n5. 주석: JSDoc + 한국어 설명 추가",
      "verificationCriteria": "1. useInvoiceStore에서 createShareLink, deleteShareLink, getMyShareLinks 액션 호출 가능\\n2. 공유 상태가 정확하게 업데이트됨 (isSharing, shareLinks)\\n3. npm run build 성공\\n4. 타입 안전성 보장 (any 사용 금지)",
      "analysisResult": "Phase 3 핵심 기능 구현의 최종 단계 - Task 017(공유 링크), Task 018(PDF 다운로드), Task 019(E2E 테스트)를 구현합니다. 기존의 Task 012-016(인증, API 클라이언트, 조회, CRUD)을 기반으로 하며, 공유 API 클라이언트는 이미 완비되어 있습니다. 각 Task는 1-3일 내에 완료 가능하도록 설계되었으며, Playwright MCP를 활용한 E2E 테스트 검증이 필수입니다. TypeScript Strict Mode 준수, 한국어 주석, 기존 코딩 스타일 일관성 유지가 핵심 원칙입니다.",
      "summary": "useInvoiceStore에 공유 링크 기능 완벽하게 구현. createShareLink, deleteShareLink, getMyShareLinks 액션 추가. 동적 임포트로 순환 의존성 방지, 에러 처리 완비, 타입 안전성 보장. npm run build 성공, TypeScript Strict Mode 준수.",
      "completedAt": "2026-01-20T09:39:35.803Z"
    },
    {
      "id": "2bac7a46-acdc-4f6e-8a61-18c491f9e673",
      "name": "Task 017-2: 견적서 상세 페이지에 공유 링크 생성 버튼 추가",
      "description": "관리자용 견적서 상세 페이지(/app/(protected)/invoices/[id]/page.tsx)에 '공유 링크 생성' 버튼을 추가하고, 공유 링크 생성 기능을 구현합니다.",
      "notes": "공유 모달은 Task 017-3에서 구현. 토스트 알림은 sonner 라이브러리 사용 (이미 설치됨).",
      "status": "completed",
      "dependencies": [],
      "createdAt": "2026-01-20T09:37:23.656Z",
      "updatedAt": "2026-01-20T09:40:37.633Z",
      "relatedFiles": [
        {
          "path": "app/(protected)/invoices/[id]/invoice-detail-content.tsx",
          "type": "TO_MODIFY",
          "description": "공유 버튼 추가 및 로직 구현"
        },
        {
          "path": "components/features/share-modal.tsx",
          "type": "DEPENDENCY",
          "description": "공유 모달 컴포넌트 (Task 017-3에서 생성)"
        }
      ],
      "implementationGuide": "1. invoice-detail-content.tsx에 '공유 링크 생성' 버튼 추가 (상단 우측)\\n2. 버튼 클릭 시 useInvoiceStore().createShareLink(invoiceId) 호출\\n3. 성공 시 toast.success('공유 링크가 생성되었습니다') + 공유 모달 표시\\n4. 실패 시 toast.error(에러 메시지) 표시\\n5. 로딩 상태 동안 버튼 disabled 처리\\n6. 기존 삭제 버튼 패턴 참고 (ConfirmDialog 사용)",
      "verificationCriteria": "1. '공유 링크 생성' 버튼이 견적서 상세 페이지에 표시됨\\n2. 버튼 클릭 시 공유 링크 생성 API 호출됨\\n3. 성공/실패 토스트 알림이 표시됨\\n4. 로딩 중 버튼이 disabled 상태로 변함",
      "analysisResult": "Phase 3 핵심 기능 구현의 최종 단계 - Task 017(공유 링크), Task 018(PDF 다운로드), Task 019(E2E 테스트)를 구현합니다. 기존의 Task 012-016(인증, API 클라이언트, 조회, CRUD)을 기반으로 하며, 공유 API 클라이언트는 이미 완비되어 있습니다. 각 Task는 1-3일 내에 완료 가능하도록 설계되었으며, Playwright MCP를 활용한 E2E 테스트 검증이 필수입니다. TypeScript Strict Mode 준수, 한국어 주석, 기존 코딩 스타일 일관성 유지가 핵심 원칙입니다.",
      "summary": "invoice-detail-content.tsx에 공유 링크 생성 기능 구현 완료. useInvoiceStore의 createShareLink 액션 호출, 만료 기한 계산, 로딩 상태 표시. 성공/실패 토스트 알림 구현. npm run build 성공.",
      "completedAt": "2026-01-20T09:40:37.626Z"
    },
    {
      "id": "3b18e472-91eb-4771-bf89-bb6cd2fc5ff3",
      "name": "Task 017-3: 공유 URL 모달 컴포넌트 생성 및 URL 복사 기능",
      "description": "공유 링크 생성 후 공유 URL을 표시하고 클립보드에 복사할 수 있는 모달 컴포넌트를 만듭니다.",
      "notes": "Dialog는 shadcn/ui에서 이미 설치됨. Clipboard API는 최신 브라우저에서 지원.",
      "status": "completed",
      "dependencies": [],
      "createdAt": "2026-01-20T09:37:23.656Z",
      "updatedAt": "2026-01-20T09:41:30.639Z",
      "relatedFiles": [
        {
          "path": "components/features/share-modal.tsx",
          "type": "CREATE",
          "description": "공유 URL 모달 컴포넌트"
        },
        {
          "path": "components/ui/dialog.tsx",
          "type": "REFERENCE",
          "description": "shadcn/ui Dialog 컴포넌트"
        }
      ],
      "implementationGuide": "1. components/features/share-modal.tsx 신규 생성 (use client)\\n2. Dialog 컴포넌트로 모달 구성\\n3. 공유 URL 표시 (복사 가능한 텍스트 input)\\n4. '복사' 버튼 구현 (Clipboard API 또는 react-copy-to-clipboard)\\n5. 복사 성공 시 toast.success('URL이 복사되었습니다')\\n6. '닫기' 버튼\\n7. 토큰 만료 표시 (있으면)\\n8. 접근성: aria-label, aria-describedby 추가",
      "verificationCriteria": "1. 모달에 공유 URL이 표시됨\\n2. '복사' 버튼 클릭 시 클립보드에 URL 저장됨\\n3. 복사 완료 토스트 알림 표시\\n4. 다크모드에서도 가독성 우수\\n5. 모바일 화면에서도 모달이 정상 표시됨",
      "analysisResult": "Phase 3 핵심 기능 구현의 최종 단계 - Task 017(공유 링크), Task 018(PDF 다운로드), Task 019(E2E 테스트)를 구현합니다. 기존의 Task 012-016(인증, API 클라이언트, 조회, CRUD)을 기반으로 하며, 공유 API 클라이언트는 이미 완비되어 있습니다. 각 Task는 1-3일 내에 완료 가능하도록 설계되었으며, Playwright MCP를 활용한 E2E 테스트 검증이 필수입니다. TypeScript Strict Mode 준수, 한국어 주석, 기존 코딩 스타일 일관성 유지가 핵심 원칙입니다.",
      "summary": "components/features/share-modal.tsx 생성 완료. 공유 URL 표시, 클립보드 복사 기능, 만료 기한 설정, 접근성 완비 (aria-label, aria-describedby). TypeScript Strict Mode 준수, 한국어 주석 추가. npm run build 성공.",
      "completedAt": "2026-01-20T09:41:30.627Z"
    },
    {
      "id": "121996af-2163-4128-9a45-a0da5362d0e7",
      "name": "Task 017-4: 공개 페이지 토큰 검증 및 공유 링크 조회 로직 추가",
      "description": "공개 견적서 목록(/app/share/[token]/page.tsx)과 상세 페이지에서 토큰을 검증하고 공유된 견적서를 조회하는 로직을 추가합니다.",
      "notes": "공개 페이지는 인증 불필요. API는 lib/api-share.ts에서 getSharedInvoicesApi, getSharedInvoiceApi 사용. 토큰 검증은 매번 수행 (만료 가능).",
      "status": "in_progress",
      "dependencies": [],
      "createdAt": "2026-01-20T09:37:23.657Z",
      "updatedAt": "2026-01-20T09:41:36.049Z",
      "relatedFiles": [
        {
          "path": "app/share/[token]/page.tsx",
          "type": "TO_MODIFY",
          "description": "토큰 검증 및 공유 목록 조회 로직"
        },
        {
          "path": "app/share/[token]/invoices/[id]/page.tsx",
          "type": "TO_MODIFY",
          "description": "토큰 검증 및 공유 상세 조회 로직"
        },
        {
          "path": "lib/api-share.ts",
          "type": "REFERENCE",
          "description": "공유 API 함수"
        }
      ],
      "implementationGuide": "1. app/share/[token]/page.tsx: useEffect에서 validateShareTokenApi(token) 호출\\n2. 유효한 토큰: getSharedInvoicesApi(token) 호출 -> 견적서 목록 표시\\n3. 유효하지 않은 토큰: EmptyState 컴포넌트로 '링크가 존재하지 않거나 만료됨' 메시지\\n4. app/share/[token]/invoices/[id]/page.tsx: 동일한 검증 로직 + 특정 견적서 조회\\n5. 로딩 중: Spinner 표시\\n6. 에러 처리: toast.error(에러 메시지)\\n7. 각 페이지에서 share-invoices-content.tsx, share-invoice-detail-content.tsx 활용",
      "verificationCriteria": "1. 유효한 토큰으로 접근 시 공유 견적서 목록 조회됨\\n2. 유효하지 않은 토큰 시 에러 메시지 표시\\n3. 만료된 토큰 시 적절한 에러 메시지\\n4. 공개 페이지에서 로그인 페이지로 리디렉션되지 않음\\n5. 공개 목록과 상세 페이지 모두 정상 작동",
      "analysisResult": "Phase 3 핵심 기능 구현의 최종 단계 - Task 017(공유 링크), Task 018(PDF 다운로드), Task 019(E2E 테스트)를 구현합니다. 기존의 Task 012-016(인증, API 클라이언트, 조회, CRUD)을 기반으로 하며, 공유 API 클라이언트는 이미 완비되어 있습니다. 각 Task는 1-3일 내에 완료 가능하도록 설계되었으며, Playwright MCP를 활용한 E2E 테스트 검증이 필수입니다. TypeScript Strict Mode 준수, 한국어 주석, 기존 코딩 스타일 일관성 유지가 핵심 원칙입니다."
    },
    {
      "id": "95ed7477-c1d8-464c-9a16-a7e0b5c3f948",
      "name": "Task 018-1: PDF 라이브러리 설치 및 설정",
      "description": "프로젝트에 PDF 생성 라이브러리를 설치하고 기본 설정을 완료합니다.",
      "notes": "jsPDF + html2canvas 조합이 더 유연. html2pdf는 단순한 경우에 좋음. 프로젝트에서는 복잡한 스타일링이 필요하므로 jsPDF + html2canvas 권장.",
      "status": "pending",
      "dependencies": [],
      "createdAt": "2026-01-20T09:37:23.657Z",
      "updatedAt": "2026-01-20T09:37:23.657Z",
      "relatedFiles": [
        {
          "path": "package.json",
          "type": "TO_MODIFY",
          "description": "PDF 라이브러리 의존성 추가"
        }
      ],
      "implementationGuide": "1. npm install jspdf html2canvas 실행\\n2. 또는 npm install html2pdf.js (대안)\\n3. package.json 확인 및 버전 기록\\n4. TypeScript 타입 설정: npm install --save-dev @types/jspdf (필요시)\\n5. npm run build 실행하여 설치 완료 확인",
      "verificationCriteria": "1. npm install 성공\\n2. npm run build 성공\\n3. package.json에서 jspdf, html2canvas 버전 확인 가능",
      "analysisResult": "Phase 3 핵심 기능 구현의 최종 단계 - Task 017(공유 링크), Task 018(PDF 다운로드), Task 019(E2E 테스트)를 구현합니다. 기존의 Task 012-016(인증, API 클라이언트, 조회, CRUD)을 기반으로 하며, 공유 API 클라이언트는 이미 완비되어 있습니다. 각 Task는 1-3일 내에 완료 가능하도록 설계되었으며, Playwright MCP를 활용한 E2E 테스트 검증이 필수입니다. TypeScript Strict Mode 준수, 한국어 주석, 기존 코딩 스타일 일관성 유지가 핵심 원칙입니다."
    },
    {
      "id": "0df2f56a-41ea-44f9-be2b-c38762079164",
      "name": "Task 018-2: lib/invoice-pdf.ts 생성 - PDF 생성 로직 구현",
      "description": "견적서 데이터를 PDF 형식으로 변환하는 함수를 구현합니다.",
      "notes": "HTML 템플림릿은 숨겨진 div(display:none)에 생성 후 렌더링. 모바일에서도 동작하도록 테스트 필수. 성능: 큰 견적서(100+ 항목)는 시간이 걸릴 수 있음.",
      "status": "pending",
      "dependencies": [],
      "createdAt": "2026-01-20T09:37:23.657Z",
      "updatedAt": "2026-01-20T09:37:23.657Z",
      "relatedFiles": [
        {
          "path": "lib/invoice-pdf.ts",
          "type": "CREATE",
          "description": "PDF 생성 함수 구현"
        }
      ],
      "implementationGuide": "1. lib/invoice-pdf.ts 신규 생성\\n2. generateInvoicePdf(invoice: Invoice): Promise<void> 함수 구현\\n3. HTML 템플릿 생성: 견적서 제목, 클라이언트 정보, 항목 테이블, 총액\\n4. html2canvas로 DOM을 캔버스로 변환\\n5. jsPDF로 캔버스를 PDF로 변환\\n6. 파일명: invoice_${invoiceId}_${현재 날짜}.pdf\\n7. 스타일: 인쇄 친화적 (흰 배경, 검은 텍스트, 명확한 폰트)\\n8. 페이지 나누기: 큰 항목 목록은 여러 페이지로 분할\\n9. 에러 처리: try-catch로 사용자 친화적 메시지 반환",
      "verificationCriteria": "1. generateInvoicePdf 함수 호출 시 PDF 파일 생성\\n2. PDF에 모든 견적서 정보 포함 (제목, 클라이언트, 항목, 총액)\\n3. PDF 스타일이 인쇄 친화적\\n4. 큰 견적서도 정상 생성\\n5. 파일명이 올바른 형식",
      "analysisResult": "Phase 3 핵심 기능 구현의 최종 단계 - Task 017(공유 링크), Task 018(PDF 다운로드), Task 019(E2E 테스트)를 구현합니다. 기존의 Task 012-016(인증, API 클라이언트, 조회, CRUD)을 기반으로 하며, 공유 API 클라이언트는 이미 완비되어 있습니다. 각 Task는 1-3일 내에 완료 가능하도록 설계되었으며, Playwright MCP를 활용한 E2E 테스트 검증이 필수입니다. TypeScript Strict Mode 준수, 한국어 주석, 기존 코딩 스타일 일관성 유지가 핵심 원칙입니다."
    },
    {
      "id": "9edad6bb-8029-414d-a2dd-cc86ed1b04c0",
      "name": "Task 018-3: 공개 상세 페이지에 PDF 다운로드 버튼 추가",
      "description": "공개 견적서 상세 페이지(/app/share/[token]/invoices/[id]/page.tsx)에 'PDF 다운로드' 버튼을 추가하고 기능을 구현합니다.",
      "notes": "PDF 생성 시간이 걸릴 수 있으므로 로딩 상태 표시 필수. 버튼은 shadcn/ui Button 컴포넌트 사용.",
      "status": "pending",
      "dependencies": [],
      "createdAt": "2026-01-20T09:37:23.657Z",
      "updatedAt": "2026-01-20T09:37:23.657Z",
      "relatedFiles": [
        {
          "path": "app/share/[token]/invoices/[id]/share-invoice-detail-content.tsx",
          "type": "TO_MODIFY",
          "description": "PDF 다운로드 버튼 추가"
        },
        {
          "path": "lib/invoice-pdf.ts",
          "type": "REFERENCE",
          "description": "PDF 생성 함수"
        }
      ],
      "implementationGuide": "1. share-invoice-detail-content.tsx 수정\\n2. '목록으로' 버튼 옆에 'PDF 다운로드' 버튼 추가 (주목도 높음)\\n3. 버튼 클릭 시 generateInvoicePdf(invoice) 호출\\n4. 로딩 중: 버튼 disabled + '다운로드 중...' 텍스트\\n5. 성공: toast.success('PDF가 다운로드되었습니다')\\n6. 실패: toast.error(에러 메시지)\\n7. 접근성: aria-label, title 속성 추가",
      "verificationCriteria": "1. '공개 견적서 상세 페이지에 'PDF 다운로드' 버튼 표시됨\\n2. 버튼 클릭 시 PDF 파일 다운로드 시작\\n3. 로딩 중 버튼 상태 변함\\n4. 다운로드 완료 후 토스트 알림 표시\\n5. 다양한 화면 크기에서 버튼 접근 가능",
      "analysisResult": "Phase 3 핵심 기능 구현의 최종 단계 - Task 017(공유 링크), Task 018(PDF 다운로드), Task 019(E2E 테스트)를 구현합니다. 기존의 Task 012-016(인증, API 클라이언트, 조회, CRUD)을 기반으로 하며, 공유 API 클라이언트는 이미 완비되어 있습니다. 각 Task는 1-3일 내에 완료 가능하도록 설계되었으며, Playwright MCP를 활용한 E2E 테스트 검증이 필수입니다. TypeScript Strict Mode 준수, 한국어 주석, 기존 코딩 스타일 일관성 유지가 핵심 원칙입니다."
    },
    {
      "id": "8b900ed7-bb0c-44bb-890d-0d2636686729",
      "name": "Task 018-4: 관리자 상세 페이지에 PDF 다운로드 버튼 추가 (선택사항)",
      "description": "관리자용 견적서 상세 페이지(/app/(protected)/invoices/[id]/page.tsx)에도 'PDF 다운로드' 버튼을 추가합니다.",
      "notes": "선택사항이지만, 관리자가 견적서를 미리 확인할 수 있으므로 추천. 공개 상세 페이지와 동일한 구현.",
      "status": "pending",
      "dependencies": [],
      "createdAt": "2026-01-20T09:37:23.657Z",
      "updatedAt": "2026-01-20T09:37:23.657Z",
      "relatedFiles": [
        {
          "path": "app/(protected)/invoices/[id]/invoice-detail-content.tsx",
          "type": "TO_MODIFY",
          "description": "PDF 다운로드 버튼 추가"
        }
      ],
      "implementationGuide": "1. invoice-detail-content.tsx 수정\\n2. '돌아가기' 또는 '취소' 버튼 옆에 'PDF 다운로드' 버튼 추가\\n3. 공개 상세 페이지와 동일한 로직 (generateInvoicePdf 호출)\\n4. 로딩/성공/실패 상태 처리\\n5. 버튼 순서: 삭제 → 공유 → PDF 다운로드 → 취소",
      "verificationCriteria": "1. 관리자 상세 페이지에도 'PDF 다운로드' 버튼 표시됨\\n2. 클릭 시 PDF 파일 다운로드\\n3. 공개 상세 페이지와 동일한 동작",
      "analysisResult": "Phase 3 핵심 기능 구현의 최종 단계 - Task 017(공유 링크), Task 018(PDF 다운로드), Task 019(E2E 테스트)를 구현합니다. 기존의 Task 012-016(인증, API 클라이언트, 조회, CRUD)을 기반으로 하며, 공유 API 클라이언트는 이미 완비되어 있습니다. 각 Task는 1-3일 내에 완료 가능하도록 설계되었으며, Playwright MCP를 활용한 E2E 테스트 검증이 필수입니다. TypeScript Strict Mode 준수, 한국어 주석, 기존 코딩 스타일 일관성 유지가 핵심 원칙입니다."
    },
    {
      "id": "f6bef13b-29dc-4a7a-ace4-8716f0de0166",
      "name": "Task 019-1: Playwright 테스트 환경 설정",
      "description": "Playwright MCP를 이용한 E2E 테스트 환경을 설정하고 기본 테스트 구조를 만듭니다.",
      "notes": "npm run mcp:playwright 명령어로 실행. 기존 설정이 있으면 확인 후 필요시 수정.",
      "status": "pending",
      "dependencies": [],
      "createdAt": "2026-01-20T09:37:23.657Z",
      "updatedAt": "2026-01-20T09:37:23.657Z",
      "relatedFiles": [
        {
          "path": "playwright.config.ts",
          "type": "CREATE",
          "description": "Playwright 설정 파일"
        },
        {
          "path": "tests/e2e/.gitkeep",
          "type": "CREATE",
          "description": "테스트 디렉토리"
        }
      ],
      "implementationGuide": "1. playwright.config.ts 생성 (또는 기존 확인)\\n2. baseURL 설정: http://localhost:3000\\n3. 브라우저 설정: chromium, firefox, webkit\\n4. 테스트 디렉토리 설정: tests/e2e\\n5. 헤드리스 모드 설정 (CI/CD 대비)\\n6. 타임아웃 설정: navigationTimeout: 30s, actionTimeout: 10s\\n7. screenshot/video 기록 설정 (실패 시)\\n8. .gitignore에 test-results/ 추가",
      "verificationCriteria": "1. playwright.config.ts 생성됨\\n2. npm run mcp:playwright 실행 가능\\n3. 테스트 디렉토리 생성됨",
      "analysisResult": "Phase 3 핵심 기능 구현의 최종 단계 - Task 017(공유 링크), Task 018(PDF 다운로드), Task 019(E2E 테스트)를 구현합니다. 기존의 Task 012-016(인증, API 클라이언트, 조회, CRUD)을 기반으로 하며, 공유 API 클라이언트는 이미 완비되어 있습니다. 각 Task는 1-3일 내에 완료 가능하도록 설계되었으며, Playwright MCP를 활용한 E2E 테스트 검증이 필수입니다. TypeScript Strict Mode 준수, 한국어 주석, 기존 코딩 스타일 일관성 유지가 핵심 원칙입니다."
    },
    {
      "id": "aa9f3437-ba62-4ad1-a58a-dbafb8a6776b",
      "name": "Task 019-2: 관리자 플로우 E2E 테스트 (로그인 ~ 공유)",
      "description": "관리자의 전체 사용자 여정을 Playwright로 테스트합니다: 로그인 → 대시보드 → 견적서 생성 → 공유 → 로그아웃",
      "notes": "테스트 데이터: 고정된 이메일/비밀번호 사용 (seed 데이터). 브라우저 저장소 초기화: page.context().clearCookies().",
      "status": "pending",
      "dependencies": [],
      "createdAt": "2026-01-20T09:37:23.657Z",
      "updatedAt": "2026-01-20T09:37:23.657Z",
      "relatedFiles": [
        {
          "path": "tests/e2e/admin-flow.spec.ts",
          "type": "CREATE",
          "description": "관리자 플로우 E2E 테스트"
        }
      ],
      "implementationGuide": "1. tests/e2e/admin-flow.spec.ts 생성\\n2. 테스트 케이스: test('Admin full flow: login to logout')\\n3. 단계 1: 로그인 페이지 접근 → 계정 입력 → 비밀번호 입력 → 로그인\\n4. 단계 2: 대시보드 로드 확인 (견적서 목록 표시)\\n5. 단계 3: '새 견적서' 버튼 클릭 → 생성 페이지 이동\\n6. 단계 4: 폼 입력 (제목, 클라이언트, 항목) → 저장\\n7. 단계 5: 상세 페이지 로드 확인\\n8. 단계 6: '공유 링크 생성' 버튼 클릭 → 공유 URL 복사\\n9. 단계 7: 로그아웃 버튼 클릭 → 로그인 페이지 리디렉션\\n10. 각 단계에서 expect()로 결과 검증",
      "verificationCriteria": "1. 모든 단계 통과 (로그인 ~ 로그아웃)\\n2. 각 페이지에서 예상 요소 찾음 (버튼, 입력 필드)\\n3. 공유 링크 생성 후 URL이 클립보드에 저장됨\\n4. 테스트 실행 시간 < 30초",
      "analysisResult": "Phase 3 핵심 기능 구현의 최종 단계 - Task 017(공유 링크), Task 018(PDF 다운로드), Task 019(E2E 테스트)를 구현합니다. 기존의 Task 012-016(인증, API 클라이언트, 조회, CRUD)을 기반으로 하며, 공유 API 클라이언트는 이미 완비되어 있습니다. 각 Task는 1-3일 내에 완료 가능하도록 설계되었으며, Playwright MCP를 활용한 E2E 테스트 검증이 필수입니다. TypeScript Strict Mode 준수, 한국어 주석, 기존 코딩 스타일 일관성 유지가 핵심 원칙입니다."
    },
    {
      "id": "0afc226d-16a3-49ef-a7db-71c74beb265d",
      "name": "Task 019-3: 클라이언트 플로우 E2E 테스트 (공개 URL ~ PDF 다운로드)",
      "description": "클라이언트의 공개 페이지 사용자 여정을 테스트합니다: 공유 URL 접근 → 목록 조회 → 상세 조회 → PDF 다운로드",
      "notes": "공유 토큰은 고정값 또는 환경 변수로 설정. 파일 다운로드 검증: page.on('download', ...)\\n다운로드 파일명 확인: invoice_*.pdf 패턴",
      "status": "pending",
      "dependencies": [],
      "createdAt": "2026-01-20T09:37:23.657Z",
      "updatedAt": "2026-01-20T09:37:23.657Z",
      "relatedFiles": [
        {
          "path": "tests/e2e/client-flow.spec.ts",
          "type": "CREATE",
          "description": "클라이언트 플로우 E2E 테스트"
        }
      ],
      "implementationGuide": "1. tests/e2e/client-flow.spec.ts 생성\\n2. 테스트 케이스: test('Client full flow: shared URL to PDF')\\n3. 전제: 유효한 공유 토큰이 필요 (Task 019-2에서 생성된 공유 링크 사용 또는 고정 토큰)\\n4. 단계 1: 공유 URL(http://localhost:3000/share/[token]) 접근\\n5. 단계 2: 공개 목록 페이지 로드 확인 (견적서 카드 표시)\\n6. 단계 3: 견적서 클릭 → 상세 페이지 이동\\n7. 단계 4: 상세 정보 확인 (제목, 클라이언트, 항목, 총액)\\n8. 단계 5: 'PDF 다운로드' 버튼 클릭\\n9. 단계 6: 파일 다운로드 확인 (downloads 폴더)\\n10. 각 단계에서 expect()로 결과 검증",
      "verificationCriteria": "1. 공개 URL 접근 시 목록 페이지 로드됨\\n2. 견적서 선택 후 상세 페이지 표시\\n3. 모든 견적서 정보 확인 가능\\n4. 'PDF 다운로드' 버튼 클릭 시 파일 다운로드 시작\\n5. 다운로드된 파일이 올바른 형식 (PDF)",
      "analysisResult": "Phase 3 핵심 기능 구현의 최종 단계 - Task 017(공유 링크), Task 018(PDF 다운로드), Task 019(E2E 테스트)를 구현합니다. 기존의 Task 012-016(인증, API 클라이언트, 조회, CRUD)을 기반으로 하며, 공유 API 클라이언트는 이미 완비되어 있습니다. 각 Task는 1-3일 내에 완료 가능하도록 설계되었으며, Playwright MCP를 활용한 E2E 테스트 검증이 필수입니다. TypeScript Strict Mode 준수, 한국어 주석, 기존 코딩 스타일 일관성 유지가 핵심 원칙입니다."
    },
    {
      "id": "e68516cc-7dc2-49d7-8119-09daa002b3eb",
      "name": "Task 019-4: 에러 시나리오 및 성능 테스트",
      "description": "에러 케이스와 성능 기준을 테스트합니다: 유효하지 않은 토큰, 존재하지 않는 견적서, 네트워크 오류, 페이지 로드 시간",
      "notes": "에러 메시지는 toast 또는 페이지 텍스트로 확인. 성능 측정: page.goto() 시간, page.waitForLoadState('networkidle')\\nPerformanceObserver 활용 가능.",
      "status": "pending",
      "dependencies": [],
      "createdAt": "2026-01-20T09:37:23.657Z",
      "updatedAt": "2026-01-20T09:37:23.657Z",
      "relatedFiles": [
        {
          "path": "tests/e2e/error-scenarios.spec.ts",
          "type": "CREATE",
          "description": "에러 시나리오 및 성능 테스트"
        }
      ],
      "implementationGuide": "1. tests/e2e/error-scenarios.spec.ts 생성\\n2. 에러 케이스 1: 유효하지 않은 공유 토큰 (invalid-token) → 에러 메시지 표시\\n3. 에러 케이스 2: 존재하지 않는 견적서 ID → 404 에러\\n4. 에러 케이스 3: 잘못된 로그인 (비밀번호 틀림) → 에러 메시지\\n5. 에러 케이스 4: 권한 없는 견적서 조회 (다른 관리자 견적서) → 403 에러\\n6. 성능 테스트: 각 페이지 로드 시간 측정 (목표 < 2초)\\n7. PDF 생성 시간 측정 (목표 < 3초)\\n8. 결과: expect() 또는 console.log로 기록",
      "verificationCriteria": "1. 모든 에러 케이스에서 사용자 친화적 메시지 표시\\n2. 페이지 로드 시간 < 2초\\n3. PDF 생성 시간 < 3초\\n4. 네트워크 오류 발생 시에도 UI가 충돌하지 않음\\n5. 테스트 실행 중 에러 발생 시 스크린샷/비디오 기록됨",
      "analysisResult": "Phase 3 핵심 기능 구현의 최종 단계 - Task 017(공유 링크), Task 018(PDF 다운로드), Task 019(E2E 테스트)를 구현합니다. 기존의 Task 012-016(인증, API 클라이언트, 조회, CRUD)을 기반으로 하며, 공유 API 클라이언트는 이미 완비되어 있습니다. 각 Task는 1-3일 내에 완료 가능하도록 설계되었으며, Playwright MCP를 활용한 E2E 테스트 검증이 필수입니다. TypeScript Strict Mode 준수, 한국어 주석, 기존 코딩 스타일 일관성 유지가 핵심 원칙입니다."
    }
  ]
}