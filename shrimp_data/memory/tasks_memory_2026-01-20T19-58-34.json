{
  "tasks": [
    {
      "id": "e5d5a4a4-79ad-42f9-b0fd-46364f4a4eeb",
      "name": "Task 017-1: useInvoiceStore에 공유 상태 및 액션 추가",
      "description": "Zustand store에 공유 링크 생성, 검증, 조회 기능을 추가합니다. API 호출 로직을 store에 통합하고, 공유 상태(isSharing, sharedInvoices, shareLink)를 관리합니다.",
      "notes": "동적 임포트로 순환 의존성 방지. 기존 updateInvoice 패턴 참고. useLocalStorage에서 토큰 관리 확인 필수.",
      "status": "completed",
      "dependencies": [],
      "createdAt": "2026-01-20T09:37:23.656Z",
      "updatedAt": "2026-01-20T09:39:35.808Z",
      "relatedFiles": [
        {
          "path": "store/useInvoiceStore.ts",
          "type": "TO_MODIFY",
          "description": "공유 상태 및 액션 추가",
          "lineStart": 1,
          "lineEnd": 154
        },
        {
          "path": "lib/api-share.ts",
          "type": "REFERENCE",
          "description": "공유 API 함수 참고"
        }
      ],
      "implementationGuide": "1. store/useInvoiceStore.ts 수정: 공유 관련 상태 추가 (shareLinks: InvoiceShare[], isSharing: boolean)\\n2. 액션 추가: createShareLink(invoiceId), deleteShareLink(shareId), getMyShareLinks()\\n3. 각 액션은 lib/api-share.ts의 함수를 동적 임포트로 호출\\n4. 에러 처리 및 로딩 상태 관리 (기존 패턴 따르기)\\n5. 주석: JSDoc + 한국어 설명 추가",
      "verificationCriteria": "1. useInvoiceStore에서 createShareLink, deleteShareLink, getMyShareLinks 액션 호출 가능\\n2. 공유 상태가 정확하게 업데이트됨 (isSharing, shareLinks)\\n3. npm run build 성공\\n4. 타입 안전성 보장 (any 사용 금지)",
      "analysisResult": "Phase 3 핵심 기능 구현의 최종 단계 - Task 017(공유 링크), Task 018(PDF 다운로드), Task 019(E2E 테스트)를 구현합니다. 기존의 Task 012-016(인증, API 클라이언트, 조회, CRUD)을 기반으로 하며, 공유 API 클라이언트는 이미 완비되어 있습니다. 각 Task는 1-3일 내에 완료 가능하도록 설계되었으며, Playwright MCP를 활용한 E2E 테스트 검증이 필수입니다. TypeScript Strict Mode 준수, 한국어 주석, 기존 코딩 스타일 일관성 유지가 핵심 원칙입니다.",
      "summary": "useInvoiceStore에 공유 링크 기능 완벽하게 구현. createShareLink, deleteShareLink, getMyShareLinks 액션 추가. 동적 임포트로 순환 의존성 방지, 에러 처리 완비, 타입 안전성 보장. npm run build 성공, TypeScript Strict Mode 준수.",
      "completedAt": "2026-01-20T09:39:35.803Z"
    },
    {
      "id": "2bac7a46-acdc-4f6e-8a61-18c491f9e673",
      "name": "Task 017-2: 견적서 상세 페이지에 공유 링크 생성 버튼 추가",
      "description": "관리자용 견적서 상세 페이지(/app/(protected)/invoices/[id]/page.tsx)에 '공유 링크 생성' 버튼을 추가하고, 공유 링크 생성 기능을 구현합니다.",
      "notes": "공유 모달은 Task 017-3에서 구현. 토스트 알림은 sonner 라이브러리 사용 (이미 설치됨).",
      "status": "completed",
      "dependencies": [],
      "createdAt": "2026-01-20T09:37:23.656Z",
      "updatedAt": "2026-01-20T09:40:37.633Z",
      "relatedFiles": [
        {
          "path": "app/(protected)/invoices/[id]/invoice-detail-content.tsx",
          "type": "TO_MODIFY",
          "description": "공유 버튼 추가 및 로직 구현"
        },
        {
          "path": "components/features/share-modal.tsx",
          "type": "DEPENDENCY",
          "description": "공유 모달 컴포넌트 (Task 017-3에서 생성)"
        }
      ],
      "implementationGuide": "1. invoice-detail-content.tsx에 '공유 링크 생성' 버튼 추가 (상단 우측)\\n2. 버튼 클릭 시 useInvoiceStore().createShareLink(invoiceId) 호출\\n3. 성공 시 toast.success('공유 링크가 생성되었습니다') + 공유 모달 표시\\n4. 실패 시 toast.error(에러 메시지) 표시\\n5. 로딩 상태 동안 버튼 disabled 처리\\n6. 기존 삭제 버튼 패턴 참고 (ConfirmDialog 사용)",
      "verificationCriteria": "1. '공유 링크 생성' 버튼이 견적서 상세 페이지에 표시됨\\n2. 버튼 클릭 시 공유 링크 생성 API 호출됨\\n3. 성공/실패 토스트 알림이 표시됨\\n4. 로딩 중 버튼이 disabled 상태로 변함",
      "analysisResult": "Phase 3 핵심 기능 구현의 최종 단계 - Task 017(공유 링크), Task 018(PDF 다운로드), Task 019(E2E 테스트)를 구현합니다. 기존의 Task 012-016(인증, API 클라이언트, 조회, CRUD)을 기반으로 하며, 공유 API 클라이언트는 이미 완비되어 있습니다. 각 Task는 1-3일 내에 완료 가능하도록 설계되었으며, Playwright MCP를 활용한 E2E 테스트 검증이 필수입니다. TypeScript Strict Mode 준수, 한국어 주석, 기존 코딩 스타일 일관성 유지가 핵심 원칙입니다.",
      "summary": "invoice-detail-content.tsx에 공유 링크 생성 기능 구현 완료. useInvoiceStore의 createShareLink 액션 호출, 만료 기한 계산, 로딩 상태 표시. 성공/실패 토스트 알림 구현. npm run build 성공.",
      "completedAt": "2026-01-20T09:40:37.626Z"
    },
    {
      "id": "3b18e472-91eb-4771-bf89-bb6cd2fc5ff3",
      "name": "Task 017-3: 공유 URL 모달 컴포넌트 생성 및 URL 복사 기능",
      "description": "공유 링크 생성 후 공유 URL을 표시하고 클립보드에 복사할 수 있는 모달 컴포넌트를 만듭니다.",
      "notes": "Dialog는 shadcn/ui에서 이미 설치됨. Clipboard API는 최신 브라우저에서 지원.",
      "status": "completed",
      "dependencies": [],
      "createdAt": "2026-01-20T09:37:23.656Z",
      "updatedAt": "2026-01-20T09:41:30.639Z",
      "relatedFiles": [
        {
          "path": "components/features/share-modal.tsx",
          "type": "CREATE",
          "description": "공유 URL 모달 컴포넌트"
        },
        {
          "path": "components/ui/dialog.tsx",
          "type": "REFERENCE",
          "description": "shadcn/ui Dialog 컴포넌트"
        }
      ],
      "implementationGuide": "1. components/features/share-modal.tsx 신규 생성 (use client)\\n2. Dialog 컴포넌트로 모달 구성\\n3. 공유 URL 표시 (복사 가능한 텍스트 input)\\n4. '복사' 버튼 구현 (Clipboard API 또는 react-copy-to-clipboard)\\n5. 복사 성공 시 toast.success('URL이 복사되었습니다')\\n6. '닫기' 버튼\\n7. 토큰 만료 표시 (있으면)\\n8. 접근성: aria-label, aria-describedby 추가",
      "verificationCriteria": "1. 모달에 공유 URL이 표시됨\\n2. '복사' 버튼 클릭 시 클립보드에 URL 저장됨\\n3. 복사 완료 토스트 알림 표시\\n4. 다크모드에서도 가독성 우수\\n5. 모바일 화면에서도 모달이 정상 표시됨",
      "analysisResult": "Phase 3 핵심 기능 구현의 최종 단계 - Task 017(공유 링크), Task 018(PDF 다운로드), Task 019(E2E 테스트)를 구현합니다. 기존의 Task 012-016(인증, API 클라이언트, 조회, CRUD)을 기반으로 하며, 공유 API 클라이언트는 이미 완비되어 있습니다. 각 Task는 1-3일 내에 완료 가능하도록 설계되었으며, Playwright MCP를 활용한 E2E 테스트 검증이 필수입니다. TypeScript Strict Mode 준수, 한국어 주석, 기존 코딩 스타일 일관성 유지가 핵심 원칙입니다.",
      "summary": "components/features/share-modal.tsx 생성 완료. 공유 URL 표시, 클립보드 복사 기능, 만료 기한 설정, 접근성 완비 (aria-label, aria-describedby). TypeScript Strict Mode 준수, 한국어 주석 추가. npm run build 성공.",
      "completedAt": "2026-01-20T09:41:30.627Z"
    }
  ]
}