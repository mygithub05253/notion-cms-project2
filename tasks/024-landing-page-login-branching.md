# Task 024: 랜딩 페이지 및 로그인 분기 구현

**상태**: 진행 예정
**우선순위**: 높음 (Phase 5 첫 번째 Task)
**의존성**: Task 004 (UI 컴포넌트), Task 005 (로그인 페이지), Task 014 (인증 시스템)
**예상 기간**: 2-3일
**시작 예정일**: 2026-01-22

---

## 목표

최초 진입 시 사용자 친화적 랜딩 페이지를 표시하고, 로그인 페이지에서 "관리자 로그인" vs "클라이언트 로그인"을 명확하게 분기하여 각 역할별 온보딩 플로우를 완성합니다.

---

## 현재 문제

1. **초기 랜딩 페이지 부재**
   - 현재 `/app/page.tsx`가 로그인 페이지로 바로 진입
   - 홍보용 랜딩 페이지 없음
   - 신규 사용자 온보딩 경험 부족

2. **로그인 분기 없음**
   - 클라이언트/관리자 로그인 구분 없음
   - 두 역할의 인증 플로우가 동일
   - 사용자가 자신의 역할을 선택할 수 없음

3. **네비게이션 혼란**
   - 사용자가 어떤 역할인지 명확하지 않음
   - 로그인 후 목적지(대시보드 vs 공유 목록)가 불명확

---

## 구현 사항

### 1. 랜딩 페이지 UI 구현 (`/app/page.tsx` 수정)

- [ ] 기존 로그인 폼을 분리하여 랜딩 페이지로 재구성
- [ ] 프로젝트 소개 섹션 (Hero Section)
  - [ ] 헤드라인: "견적서 관리, 디지털로" 또는 유사한 카피
  - [ ] 설명: 프로젝트의 핵심 가치 제안 (3-4줄)
  - [ ] 주요 기능 3-4개 아이콘 + 텍스트
- [ ] 고객 유형별 소개
  - [ ] 관리자용: "효율적인 견적서 발급 및 관리"
  - [ ] 클라이언트용: "공유 링크로 언제 어디서나 견적 확인"
- [ ] CTA (Call To Action) 버튼
  - [ ] Primary 버튼: "로그인" (주목도 높음)
  - [ ] Secondary 버튼: "자세히 알아보기" (선택사항)
- [ ] 하단 footer 섹션
  - [ ] 회사/프로젝트 정보
  - [ ] 링크 (FAQ, 문의 등)

### 2. 로그인 분기 페이지 생성 (`/app/(auth)/login/page.tsx`)

**방식**: 로그인 페이지를 분기 페이지로 변경

- [ ] 두 가지 로그인 옵션 표시
  - [ ] 카드 1: "관리자 로그인"
    - [ ] 설명: "견적서 발급 및 관리"
    - [ ] 버튼: "관리자로 로그인" → `/app/(auth)/login/admin`
  - [ ] 카드 2: "클라이언트 로그인"
    - [ ] 설명: "공유된 견적서 확인"
    - [ ] 버튼: "클라이언트로 로그인" → `/app/(auth)/login/client`
- [ ] 또는 탭/토글로 구분
  - [ ] "관리자" 탭
  - [ ] "클라이언트" 탭
  - [ ] 선택한 탭에 맞는 폼 표시
- [ ] 돌아가기 버튼
  - [ ] 랜딩 페이지로 돌아가기 링크

**선택지 비교**:
- 카드 형식: 더 시각적, 모바일 친화적
- 탭 형식: 더 간결, 한 페이지에서 처리

**권장**: 카드 형식 (사용성 더 우수)

### 3. 관리자 로그인 페이지 (`/app/(auth)/login/admin/page.tsx`)

- [ ] 페이지 제목: "관리자 로그인"
- [ ] 설명 텍스트: "견적서 발급자 계정으로 로그인하세요"
- [ ] 기존 로그인 폼 컴포넌트 재사용
  - [ ] 이메일 입력 필드
  - [ ] 비밀번호 입력 필드
  - [ ] React Hook Form + Zod 검증
  - [ ] 로그인 버튼
- [ ] 폼 제출 처리
  - [ ] `useAuthStore().login(email, password)` 호출
  - [ ] 역할 자동으로 'admin' 설정
  - [ ] 성공 시 `/dashboard`로 리디렉션
  - [ ] 실패 시 에러 토스트 표시
- [ ] 하단 링크
  - [ ] "클라이언트입니까?" 링크 → `/app/(auth)/login/client`
  - [ ] 돌아가기 링크 → `/app/(auth)/login`

### 4. 클라이언트 로그인 페이지 (`/app/(auth)/login/client/page.tsx`)

- [ ] 페이지 제목: "클라이언트 로그인"
- [ ] 설명 텍스트: "공유된 견적서에 접근하세요"
- [ ] 클라이언트용 로그인 폼
  - [ ] 이메일 입력 필드 (필수)
  - [ ] 토큰 또는 비밀번호 입력 (선택)
  - [ ] "로그인" 버튼
  - [ ] 또는 "공유 링크에서 접근" 안내
- [ ] 폼 제출 처리
  - [ ] `useAuthStore().loginClient(email)` 호출 (또는 별도 로직)
  - [ ] 역할 자동으로 'client' 설정
  - [ ] 성공 시 `/client-dashboard`로 리디렉션
  - [ ] 또는 공유 링크 기반 페이지로 리디렉션
- [ ] 공유 링크 안내 (선택사항)
  - [ ] "공유된 링크가 있으신가요?"
  - [ ] "링크를 붙여넣기하세요" (또는 자동 감지)
  - [ ] 공유 링크 validation

**참고**: 클라이언트 로그인은 보안 수준에 따라 다르게 구현 가능
- 방식 1: 이메일만 입력 (가장 간단)
- 방식 2: 이메일 + 일회용 토큰 (더 보안)
- 방식 3: 공유 링크 직접 사용 (인증 불필요)

**권장**: 방식 3 (공유 링크 직접 사용)으로 구현하되, 방식 1도 함께 제공

### 5. AuthGuard 컴포넌트 확장 (`/components/features/auth-guard.tsx`)

- [ ] 역할 기반 라우트 보호 확장
  - [ ] 기존: `requiredRole="admin"` 확인
  - [ ] 확장: 에러 페이지 대신 역할별 대시보드로 리디렉션
- [ ] 미인증 사용자 처리
  - [ ] 로그인 페이지로 리디렉션
  - [ ] 이전 페이지 정보 저장 (선택사항)
- [ ] 역할 불일치 시 처리
  - [ ] 관리자 접근 시도 중 클라이언트 토큰 → 클라이언트 대시보드로 리디렉션
  - [ ] 클라이언트 접근 시도 중 관리자 토큰 → 관리자 대시보드로 리디렉션

### 6. 라우팅 구조 정리

**현재 라우트**:
```
/app/page.tsx (로그인 페이지)
/app/(protected)/dashboard/page.tsx (관리자 대시보드)
/app/share/[token]/page.tsx (클라이언트 공유)
```

**변경 후 라우트**:
```
/app/page.tsx (랜딩 페이지)
/app/(auth)/login/page.tsx (로그인 분기)
/app/(auth)/login/admin/page.tsx (관리자 로그인)
/app/(auth)/login/client/page.tsx (클라이언트 로그인)
/app/(protected)/dashboard/page.tsx (관리자 대시보드)
/app/(protected)/client-dashboard/page.tsx (클라이언트 대시보드 - Task 025에서 생성)
/app/share/[token]/page.tsx (클라이언트 공유 - 인증 불필요)
```

### 7. 미들웨어 조정 (`/middleware.ts`)

- [ ] 인증 확인 로직 유지
- [ ] 로그인 페이지는 미인증 사용자도 접근 가능
- [ ] 보호된 라우트는 역할 확인 후 처리
- [ ] 공유 라우트는 인증 불필요

### 8. SEO 및 메타데이터

- [ ] `/app/page.tsx` (랜딩 페이지)
  - [ ] title: "Invoice Web - 견적서 관리 솔루션"
  - [ ] description: "노션 기반 견적서를 웹에서 관리하고 공유하세요"
  - [ ] og:image: 프로젝트 로고/스크린샷
- [ ] `/app/(auth)/login/page.tsx` (로그인 분기)
  - [ ] title: "Invoice Web - 로그인"
  - [ ] noindex: true (검색 엔진 인덱싱 방지)

---

## 구현 체크리스트

### Phase 1: 랜딩 페이지 구현

- [ ] `/app/page.tsx` 랜딩 페이지로 변경
- [ ] 기존 로그인 폼을 별도 페이지로 이동 (다음 단계)
- [ ] Hero 섹션 구현
- [ ] 기능 섹션 구현
- [ ] CTA 버튼 구현
- [ ] 반응형 디자인 확인 (모바일 포함)
- [ ] 다크모드 호환성 확인

### Phase 2: 로그인 분기 페이지 구현

- [ ] `/app/(auth)` 라우트 그룹 생성
- [ ] `/app/(auth)/login/page.tsx` 분기 페이지 구현
- [ ] 관리자/클라이언트 선택 카드 또는 탭 구현
- [ ] 각 카드에 설명 및 버튼 추가
- [ ] 돌아가기 네비게이션 구현

### Phase 3: 역할별 로그인 페이지 구현

- [ ] `/app/(auth)/login/admin/page.tsx` 생성
- [ ] `/app/(auth)/login/client/page.tsx` 생성
- [ ] 기존 로그인 폼 컴포넌트 분리 및 재사용
- [ ] 각 페이지의 제목/설명 커스터마이징
- [ ] 폼 제출 로직 구현 (역할 설정)
- [ ] 성공/실패 처리 구현

### Phase 4: 라우팅 및 미들웨어

- [ ] `/app/(protected)/layout.tsx` 업데이트 (인증 확인)
- [ ] `/middleware.ts` 조정 (로그인 경로 처리)
- [ ] AuthGuard 컴포넌트 확장
- [ ] 리디렉션 로직 확인

### Phase 5: 스타일링 및 반응형

- [ ] 랜딩 페이지 스타일링 (다크모드 포함)
- [ ] 로그인 분기 페이지 스타일링
- [ ] 모바일 레이아웃 확인 (375x667)
- [ ] 태블릿 레이아웃 확인 (768x1024)
- [ ] 버튼 클릭 가능성 확인
- [ ] 텍스트 오버플로우 확인

---

## 수락 기준

- [ ] 초기 진입 시 랜딩 페이지 표시
- [ ] 랜딩 페이지에서 "로그인" 버튼 클릭 → 로그인 분기 페이지
- [ ] 로그인 분기 페이지에서 역할 선택 가능
- [ ] 각 역할별 로그인 페이지로 이동 가능
- [ ] 관리자 로그인 후 대시보드 접근
- [ ] 클라이언트 로그인 후 클라이언트 대시보드 또는 공유 목록 접근
- [ ] 미인증 사용자가 보호된 라우트 접근 시 로그인 분기 페이지로 리디렉션
- [ ] 역할 불일치 시 올바른 대시보드로 리디렉션
- [ ] 모바일과 데스크톱에서 모두 정상 작동
- [ ] npm run build 성공
- [ ] TypeScript 컴파일 에러 없음

---

## 테스트 체크리스트 (Playwright MCP)

### 테스트 시나리오

1. **랜딩 페이지 진입**
   - [ ] URL `http://localhost:3000` 접근
   - [ ] 랜딩 페이지 렌더링 확인
   - [ ] Hero 섹션 텍스트 확인
   - [ ] "로그인" CTA 버튼 표시 확인

2. **로그인 분기 페이지**
   - [ ] 랜딩 페이지에서 "로그인" 버튼 클릭
   - [ ] 로그인 분기 페이지로 이동 확인
   - [ ] "관리자 로그인" 카드/탭 표시 확인
   - [ ] "클라이언트 로그인" 카드/탭 표시 확인

3. **관리자 로그인 플로우**
   - [ ] 분기 페이지에서 "관리자 로그인" 클릭
   - [ ] 관리자 로그인 페이지로 이동
   - [ ] 이메일 입력: `admin@example.com`
   - [ ] 비밀번호 입력: `password123`
   - [ ] 로그인 버튼 클릭
   - [ ] 대시보드로 리디렉션 확인 (또는 성공 메시지)

4. **클라이언트 로그인 플로우** (Phase 2에서 상세히 테스트)
   - [ ] 분기 페이지에서 "클라이언트 로그인" 클릭
   - [ ] 클라이언트 로그인 페이지로 이동
   - [ ] 이메일 입력: `client@example.com`
   - [ ] 로그인 버튼 클릭
   - [ ] 클라이언트 대시보드로 리디렉션 확인

5. **로그아웃 후 재진입**
   - [ ] 대시보드에서 로그아웃
   - [ ] 로그인 분기 페이지로 리디렉션 확인
   - [ ] 다시 로그인 가능 확인

6. **미인증 사용자 라우트 접근**
   - [ ] 새 시크릿 탭에서 `/dashboard` 접근
   - [ ] 로그인 분기 페이지로 리디렉션
   - [ ] 또는 로그인 페이지로 리디렉션

7. **모바일 반응형**
   - [ ] 모바일 뷰 (375x667) 설정
   - [ ] 랜딩 페이지 레이아웃 확인
   - [ ] 로그인 분기 페이지 카드 스택 확인
   - [ ] 버튼 클릭 가능성 확인 (충분한 터치 대상)

8. **다크모드 호환성**
   - [ ] 다크모드 활성화
   - [ ] 랜딩 페이지 색상 확인
   - [ ] 텍스트 가독성 확인
   - [ ] 버튼 상태 확인

### 테스트 명령어

```bash
# E2E 테스트 실행
npm run test:e2e -- --grep "Task 024"

# UI 모드로 실행 (디버깅용)
npm run test:e2e:ui -- --grep "Task 024"

# 특정 브라우저만 테스트
npm run test:e2e -- --project=chromium
```

---

## 참고 파일

- **기존 로그인 폼**: `/app/page.tsx`
- **인증 훅**: `/hooks/useAuth.ts`
- **인증 스토어**: `/store/useAuthStore.ts`
- **AuthGuard 컴포넌트**: `/components/features/auth-guard.tsx`
- **미들웨어**: `/middleware.ts`
- **타입 정의**: `/types/index.ts`

---

## 변경 사항 요약

### 신규 파일
- `/app/page.tsx` (랜딩 페이지로 변경)
- `/app/(auth)/login/page.tsx` (로그인 분기)
- `/app/(auth)/login/admin/page.tsx` (관리자 로그인)
- `/app/(auth)/login/client/page.tsx` (클라이언트 로그인)

### 수정 파일
- `/app/(protected)/layout.tsx` (인증 확인 로직 조정)
- `/middleware.ts` (로그인 경로 처리)
- `/components/features/auth-guard.tsx` (역할 확인 로직 확장)

### 삭제 파일
- 없음 (기존 로그인 폼은 이동만)

---

## 다음 Task

**Task 025: 클라이언트 로그인 기능 및 권한 관리**
- 클라이언트 역할 기반 인증
- 클라이언트 대시보드 페이지 생성
- 권한 관리 시스템 완성

---

**작성일**: 2026-01-21
**버전**: 1.0
**상태**: 진행 예정
